<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="In Between Time - Architecture Project">
    <title>In Between Time | Portfolio</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="logo">Portfolio</div>
        <ul class="nav-menu">
            <li><a href="index.html" class="nav-link">Home</a></li>
            <li><a href="about.html" class="nav-link">About</a></li>
            <li><a href="work.html" class="nav-link">Work</a></li>
            <li><a href="contact.html" class="nav-link">Contact</a></li>
        </ul>
    </nav>

    <!-- Main Content Wrapper -->
    <div class="main-content">
        <!-- Project Header -->
        <section class="project-header">
            <div class="container">
                <div class="project-nav">
                    <a href="work.html" class="back-link">← Back to Work</a>
                </div>
                <h1 class="project-title">In Between Time</h1>
                <p class="project-category">High School</p>
                <div class="project-description">
                    <p></p>
                </div>
            </div>
        </section>

        <!-- Project Images Gallery -->
        <section class="project-images">
            <div class="container">
                <!-- Phase 1: Inspiration -->
                <div class="phase-section">
                    <h2 class="phase-title">Phase 1: Inspiration</h2>
                    <div class="image-gallery" id="phase1-gallery">
                        <button class="gallery-arrow gallery-prev" onclick="changeImage('phase1', -1)">←</button>
                        <div class="gallery-main">
                            <!-- Original size for Inspiration phase -->
                            <div class="image-original-frame">
                                <img id="phase1-main" src="" alt="Phase 1 Image" onclick="openLightbox('phase1')">
                            </div>
                        </div>
                        <button class="gallery-arrow gallery-next" onclick="changeImage('phase1', 1)">→</button>
                    </div>
                </div>

                <!-- Phase 2: Pieces -->
                <div class="phase-section">
                    <h2 class="phase-title">Phase 2: Pieces</h2>
                    <div class="image-gallery" id="phase2-gallery">
                        <button class="gallery-arrow gallery-prev" onclick="changeImage('phase2', -1)">←</button>
                        <div class="gallery-main">
                            <!-- Square crop for Pieces phase -->
                            <div class="image-square-frame">
                                <img id="phase2-main" src="" alt="Phase 2 Image" onclick="openLightbox('phase2')">
                            </div>
                        </div>
                        <button class="gallery-arrow gallery-next" onclick="changeImage('phase2', 1)">→</button>
                    </div>
                </div>

                <!-- Phase 3: Final -->
                <div class="phase-section">
                    <h2 class="phase-title">Phase 3: Final</h2>
                    <div class="image-gallery" id="phase3-gallery">
                        <button class="gallery-arrow gallery-prev" onclick="changeImage('phase3', -1)">←</button>
                        <div class="gallery-main">
                            <!-- Original size for Final phase -->
                            <div class="image-original-frame">
                                <img id="phase3-main" src="" alt="Phase 3 Image" onclick="openLightbox('phase3')">
                            </div>
                        </div>
                        <button class="gallery-arrow gallery-next" onclick="changeImage('phase3', 1)">→</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Lightbox Modal for Zoom -->
        <div id="lightbox" class="lightbox" onclick="closeLightbox()">
            <span class="lightbox-close">&times;</span>
            <button class="lightbox-arrow lightbox-prev"
                onclick="event.stopPropagation(); changeLightboxImage(-1)">←</button>
            <img id="lightbox-img" src="" alt="Zoomed Image" onclick="event.stopPropagation()">
            <button class="lightbox-arrow lightbox-next"
                onclick="event.stopPropagation(); changeLightboxImage(1)">→</button>
        </div>

        <!-- Project Footer -->
        <section class="project-footer">
            <div class="container">
                <div class="project-nav-footer">
                    <a href="work.html" class="back-link">← Back to Work</a>
                    <a href="#top" class="back-link">Back to top ↑</a>
                </div>
            </div>
        </section>

        <footer class="footer">
            <div class="container">
                <p>&copy; 2024 Portfolio. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <script src="script.js"></script>
    <script>
        // Image data for each phase
        const imageData = {
            phase1: {
                images: [
                    'In-between time/brainstorm/bst-01.jpg',
                    'In-between time/brainstorm/bst-02.jpg',
                    'In-between time/brainstorm/bst-03.png'
                ],
                currentIndex: 0
            },
            phase2: {
                images: [
                    'In-between time/pieces/01.png',
                    'In-between time/pieces/02.png',
                    'In-between time/pieces/03.png',
                    'In-between time/pieces/04.png'
                ],
                currentIndex: 0
            },
            phase3: {
                images: [
                    'In-between time/final/final-01.png',
                    'In-between time/final/final-02.png',
                    'In-between time/final/final-03.png'
                ],
                currentIndex: 0
            }
        };

        const imageFolder = 'images/';
        let currentLightboxPhase = null;
        let currentLightboxIndex = 0;

        // Initialize galleries
        function initGallery(phase) {
            const data = imageData[phase];
            if (!data || data.images.length === 0) {
                const gallery = document.getElementById(`${phase}-gallery`);
                if (gallery) gallery.style.display = 'none';
                return;
            }
            updateGalleryImage(phase);
        }

        // Update gallery image
        function updateGalleryImage(phase) {
            const data = imageData[phase];
            if (!data || data.images.length === 0) return;

            const mainImg = document.getElementById(`${phase}-main`);
            if (mainImg && data.images[data.currentIndex]) {
                mainImg.src = imageFolder + data.images[data.currentIndex];
                mainImg.onerror = function () {
                    console.log('Image failed to load:', imageFolder + data.images[data.currentIndex]);
                };
            }
        }

        // Change image with arrows
        function changeImage(phase, direction) {
            const data = imageData[phase];
            if (!data) return;

            data.currentIndex += direction;
            if (data.currentIndex < 0) {
                data.currentIndex = data.images.length - 1;
            } else if (data.currentIndex >= data.images.length) {
                data.currentIndex = 0;
            }
            updateGalleryImage(phase);
        }

        // Open lightbox (zoom)
        function openLightbox(phase) {
            const data = imageData[phase];
            if (!data) return;

            currentLightboxPhase = phase;
            currentLightboxIndex = data.currentIndex;

            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');

            lightboxImg.src = imageFolder + data.images[data.currentIndex];
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Close lightbox
        function closeLightbox() {
            const lightbox = document.getElementById('lightbox');
            lightbox.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Change image in lightbox
        function changeLightboxImage(direction) {
            if (!currentLightboxPhase) return;

            const data = imageData[currentLightboxPhase];
            currentLightboxIndex += direction;

            if (currentLightboxIndex < 0) {
                currentLightboxIndex = data.images.length - 1;
            } else if (currentLightboxIndex >= data.images.length) {
                currentLightboxIndex = 0;
            }

            const lightboxImg = document.getElementById('lightbox-img');
            lightboxImg.src = imageFolder + data.images[currentLightboxIndex];

            // Update main gallery index
            data.currentIndex = currentLightboxIndex;
            updateGalleryImage(currentLightboxPhase);
        }

        // Keyboard navigation
        document.addEventListener('keydown', function (e) {
            const lightbox = document.getElementById('lightbox');
            if (lightbox.classList.contains('active')) {
                if (e.key === 'ArrowLeft') {
                    changeLightboxImage(-1);
                } else if (e.key === 'ArrowRight') {
                    changeLightboxImage(1);
                } else if (e.key === 'Escape') {
                    closeLightbox();
                }
            }
        });

        // Initialize all galleries on page load
        window.addEventListener('DOMContentLoaded', function () {
            initGallery('phase1');
            initGallery('phase2');
            initGallery('phase3');
        });
    </script>
</body>

</html>